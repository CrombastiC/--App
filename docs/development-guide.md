# é¤å… App

åŸºäº React Native å’Œ Expo æ„å»ºçš„é¤å…ç‚¹é¤åº”ç”¨ã€‚

---

## âš ï¸ HTTP è¿æ¥é—®é¢˜è§£å†³æ–¹æ¡ˆ

### é—®é¢˜æè¿°
ä½¿ç”¨ EAS Build æ‰“åŒ… Android APK åï¼Œæ— æ³•è¿æ¥åˆ° HTTP æœåŠ¡å™¨ï¼ˆé HTTPSï¼‰ã€‚

### è§£å†³æ–¹æ¡ˆ

#### 1. å®‰è£…å¿…è¦çš„æ’ä»¶
```bash
npm install expo-build-properties
```

#### 2. é…ç½® `app.config.js`
åœ¨ `plugins` æ•°ç»„ä¸­æ·»åŠ  `expo-build-properties` é…ç½®ï¼š

```javascript
plugins: [
  "expo-router",
  [
    "expo-build-properties",
    {
      android: {
        usesCleartextTraffic: true,  // å…è®¸ HTTP æ˜æ–‡ä¼ è¾“
        networkInspector: true       // å¯ç”¨ç½‘ç»œè°ƒè¯•
      }
    }
  ],
  // ... å…¶ä»–æ’ä»¶
]
```

åŒæ—¶ç¡®ä¿ `android` é…ç½®ä¸­åŒ…å«ï¼š
```javascript
android: {
  usesCleartextTraffic: true,
  // ... å…¶ä»–é…ç½®
}
```

#### 3. é‡æ–°æ„å»º
```bash
# ä½¿ç”¨ EAS Build é‡æ–°æ„å»º
eas build --profile preview --platform android
# æˆ–æ„å»ºå¼€å‘ç‰ˆæœ¬ç”¨äºè°ƒè¯•
eas build --profile development --platform android
```

### åŸå› è¯´æ˜
- Android 9 (API 28) åŠä»¥ä¸Šç‰ˆæœ¬é»˜è®¤é˜»æ­¢ HTTP æ˜æ–‡ä¼ è¾“ï¼ˆCleartext Trafficï¼‰
- å¿…é¡»é€šè¿‡ `usesCleartextTraffic: true` æ˜¾å¼å…è®¸ HTTP è¿æ¥
- ä½¿ç”¨ EAS Build äº‘ç«¯æ„å»ºæ—¶ï¼Œéœ€è¦é€šè¿‡ `expo-build-properties` æ’ä»¶é…ç½®
- **ä¸èƒ½**ç›´æ¥ä¿®æ”¹æœ¬åœ° `android/` æ–‡ä»¶å¤¹ä¸­çš„åŸç”Ÿæ–‡ä»¶ï¼Œå› ä¸º EAS Build ä¸ä¼šä½¿ç”¨è¿™äº›æœ¬åœ°ä¿®æ”¹

### è°ƒè¯•æ–¹æ³•

#### æ–¹æ³• 1ï¼šä½¿ç”¨ Development æ„å»ºï¼ˆæ¨èï¼‰
```bash
# æ„å»º development ç‰ˆæœ¬
eas build --profile development --platform android

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npx expo start --dev-client

# æ‰‹æœºæ‰“å¼€åº”ç”¨åï¼Œä¼šè‡ªåŠ¨è¿æ¥åˆ°ç”µè„‘
# æ‰€æœ‰æ—¥å¿—ä¼šåœ¨ç»ˆç«¯å®æ—¶æ˜¾ç¤º
```

#### æ–¹æ³• 2ï¼šä½¿ç”¨ ADB Logcat
```bash
# è¿æ¥æ‰‹æœºåè¿è¡Œ
adb logcat | Select-String "ğŸŒ|ğŸ”—|âŒ|ç½‘ç»œ"

# æˆ–ä½¿ç”¨é¡¹ç›®ä¸­çš„è„šæœ¬
.\view-logs.ps1
```

### ç¯å¢ƒé…ç½®è¯´æ˜
é¡¹ç›®æ”¯æŒä¸‰ç§ç¯å¢ƒï¼ˆ`config/api.config.ts`ï¼‰ï¼š
- **development**: å¼€å‘ç¯å¢ƒ - ä½¿ç”¨æœ¬åœ° IP
- **staging**: æµ‹è¯•ç¯å¢ƒ - ä½¿ç”¨æœåŠ¡å™¨åŸŸå
- **production**: ç”Ÿäº§ç¯å¢ƒ - ä½¿ç”¨æœåŠ¡å™¨åŸŸå

æ ¹æ® `eas.json` é…ç½®ï¼š
- `development` æ„å»º â†’ `APP_ENV=development`
- `preview` æ„å»º â†’ `APP_ENV=staging`
- `production` æ„å»º â†’ `APP_ENV=production`

### æœ€ä½³å®è·µå»ºè®®
- âœ… **å¼€å‘/æµ‹è¯•ç¯å¢ƒ**ï¼šå¯ä»¥ä½¿ç”¨ HTTPï¼ˆé…ç½® `usesCleartextTraffic`ï¼‰
- âš ï¸ **ç”Ÿäº§ç¯å¢ƒ**ï¼šå¼ºçƒˆå»ºè®®ä½¿ç”¨ HTTPS ç¡®ä¿æ•°æ®å®‰å…¨
- ğŸ’¡ å¯ä»¥ä½¿ç”¨å…è´¹çš„ Let's Encrypt SSL è¯ä¹¦å°†æœåŠ¡å™¨å‡çº§ä¸º HTTPS

---

## ğŸ“‘ ç›®å½•

- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ä¸»è¦åŠŸèƒ½](#-ä¸»è¦åŠŸèƒ½)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [æ ¸å¿ƒåŠŸèƒ½å®ç°](#-æ ¸å¿ƒåŠŸèƒ½å®ç°)
- [è®¤è¯åŠŸèƒ½](#-è®¤è¯åŠŸèƒ½)
- [API è¯·æ±‚å°è£…](#-api-è¯·æ±‚å°è£…)
- [EAS æ„å»ºæŒ‡å—](#-eas-æ„å»ºæŒ‡å—)
- [å¼€å‘è¯´æ˜](#-å¼€å‘è¯´æ˜)
- [æ›´æ–°æ—¥å¿—](#-æ›´æ–°æ—¥å¿—)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npx expo start

# æ‰«ç æˆ–é€‰æ‹©å¹³å°æ‰“å¼€
# - ä½¿ç”¨ Expo Go (iOS/Android)
# - æŒ‰ 'a' æ‰“å¼€ Android æ¨¡æ‹Ÿå™¨
# - æŒ‰ 'i' æ‰“å¼€ iOS æ¨¡æ‹Ÿå™¨
```

---

## âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ“ æ™ºèƒ½å®šä½ä¸åŸå¸‚é€‰æ‹©
- **è‡ªåŠ¨å®šä½** - åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨è·å–å½“å‰åŸå¸‚
- **åŸå¸‚æœç´¢** - æ”¯æŒä¸­æ–‡ã€æ‹¼éŸ³ã€é¦–å­—æ¯ä¸‰ç§æœç´¢æ–¹å¼
- **å­—æ¯ç´¢å¼•** - å¿«é€Ÿè·³è½¬åˆ°å¯¹åº”åŸå¸‚åˆ—è¡¨
- **æ™ºèƒ½ç¼“å­˜** - è®°ä½ä¸Šæ¬¡é€‰æ‹©çš„åŸå¸‚ï¼Œé¿å…é‡å¤å®šä½
- **å®šä½çŠ¶æ€æ ‡è¯†** - æ¸…æ™°å±•ç¤ºæ•°æ®æ¥æºï¼ˆç¼“å­˜/å®šä½ä¸­/å·²å®šä½ï¼‰

### ğŸª é—¨åº—é€‰æ‹©
- **æŒ‰åŸå¸‚ç­›é€‰** - æ ¹æ®å®šä½æˆ–é€‰æ‹©çš„åŸå¸‚æ˜¾ç¤ºé—¨åº—
- **é—¨åº—è¯¦æƒ…** - åœ°å€ã€è·ç¦»ç­‰ä¿¡æ¯å±•ç¤º

### ğŸ½ï¸ ç‚¹é¤åŠŸèƒ½
- **æ‰«ç ç‚¹é¤** - äºŒç»´ç æ‰«æè¿›å…¥ç‚¹é¤æµç¨‹
- **é€‰æ‹©äººæ•°** - æ”¯æŒé€‰æ‹©å°±é¤äººæ•°
- **ç»“ç®—åŠŸèƒ½** - è®¢å•ç»“ç®—å’Œæ”¯ä»˜
- **è®¢å•ç®¡ç†** - æŸ¥çœ‹å½“å‰è®¢å•å’Œå†å²è®¢å•
- **åˆ›å»ºè®¢å•** - å¿«é€Ÿåˆ›å»ºæ–°è®¢å•

### ğŸ‘¤ ä¼šå‘˜ä¸­å¿ƒ
- **ä¼šå‘˜å¡ç®¡ç†** - æŸ¥çœ‹ä¼šå‘˜ç ã€ä½™é¢
- **åœ¨çº¿å……å€¼** - æ”¯æŒå¤šæ¡£ä½å……å€¼ï¼Œå®æ—¶åˆ°è´¦
- **å……å€¼è®°å½•** - æŸ¥çœ‹å……å€¼å†å²
- **ä¸ªäººä¿¡æ¯** - ç®¡ç†ä¸ªäººèµ„æ–™
- **ä¼˜æƒ åˆ¸** - æŸ¥çœ‹å’Œä½¿ç”¨ä¼˜æƒ åˆ¸
- **è´¦æˆ·ç®¡ç†** - è´¦æˆ·ä¿¡æ¯è®¾ç½®

### ğŸ ç§¯åˆ†ç³»ç»Ÿ
- **ç§¯åˆ†é¡µé¢** - æŸ¥çœ‹ç§¯åˆ†ä½™é¢å’Œè·å–è®°å½•
- **ç§¯åˆ†å•†åŸ** - ä½¿ç”¨ç§¯åˆ†å…‘æ¢å•†å“
- **å¹¸è¿æŠ½å¥–** - ä½¿ç”¨ç§¯åˆ†å‚ä¸æŠ½å¥–æ´»åŠ¨
- **ç§¯åˆ†ä»»åŠ¡** - å®Œæˆä»»åŠ¡è·å¾—ç§¯åˆ†

### ğŸ” ç”¨æˆ·è®¤è¯
- **ç™»å½•åŠŸèƒ½** - æ‰‹æœºå· + å¯†ç ç™»å½•
- **æ³¨å†ŒåŠŸèƒ½** - æ‰‹æœºå· + æ˜µç§° + å¯†ç æ³¨å†Œ
- **Token ç®¡ç†** - è‡ªåŠ¨ Token æ³¨å…¥å’Œåˆ·æ–°
- **ç¬¬ä¸‰æ–¹ç™»å½•** - é¢„ç•™å¾®ä¿¡ã€QQ ç™»å½•å…¥å£

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
app/                          # åº”ç”¨ä¸»ç›®å½•
â”œâ”€â”€ (tabs)/                   # åº•éƒ¨å¯¼èˆªæ ‡ç­¾é¡µ
â”‚   â”œâ”€â”€ _layout.tsx           # æ ‡ç­¾é¡µå¸ƒå±€
â”‚   â”œâ”€â”€ index.tsx             # é¦–é¡µï¼ˆç‚¹é¤å…¥å£ï¼‰
â”‚   â”œâ”€â”€ order.tsx             # å½“å‰è®¢å•
â”‚   â”œâ”€â”€ orders.tsx            # å†å²è®¢å•
â”‚   â”œâ”€â”€ profile.tsx           # ä¸ªäººä¸­å¿ƒ
â”‚   â””â”€â”€ icon.tsx              # å›¾æ ‡é¡µ
â”œâ”€â”€ (location)/               # å®šä½æ¨¡å—
â”‚   â”œâ”€â”€ _layout.tsx           # å®šä½æ¨¡å—å¸ƒå±€
â”‚   â”œâ”€â”€ citySelect.tsx        # åŸå¸‚é€‰æ‹©é¡µ
â”‚   â””â”€â”€ addressSelect.tsx     # åœ°å€é€‰æ‹©é¡µ
â”œâ”€â”€ (member)/                 # ä¼šå‘˜æ¨¡å—
â”‚   â”œâ”€â”€ _layout.tsx           # ä¼šå‘˜æ¨¡å—å¸ƒå±€
â”‚   â”œâ”€â”€ memberCode.tsx        # ä¼šå‘˜ç 
â”‚   â”œâ”€â”€ top-up.tsx            # åœ¨çº¿å……å€¼
â”‚   â””â”€â”€ topUpSuccess.tsx      # å……å€¼æˆåŠŸé¡µ
â”œâ”€â”€ (orderfood)/              # ç‚¹é¤æ¨¡å—
â”‚   â”œâ”€â”€ _layout.tsx           # ç‚¹é¤æ¨¡å—å¸ƒå±€
â”‚   â”œâ”€â”€ peopleSelect.tsx      # é€‰æ‹©å°±é¤äººæ•°
â”‚   â””â”€â”€ settlement.tsx        # ç»“ç®—é¡µé¢
â”œâ”€â”€ (points)/                 # ç§¯åˆ†æ¨¡å—
â”‚   â”œâ”€â”€ _layout.tsx           # ç§¯åˆ†æ¨¡å—å¸ƒå±€
â”‚   â”œâ”€â”€ pointPage.tsx         # ç§¯åˆ†é¡µé¢
â”‚   â”œâ”€â”€ pointsMall.tsx        # ç§¯åˆ†å•†åŸ
â”‚   â””â”€â”€ luckyRoll.tsx         # å¹¸è¿æŠ½å¥–
â”œâ”€â”€ auth/                     # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ _layout.tsx           # è®¤è¯æ¨¡å—å¸ƒå±€
â”‚   â”œâ”€â”€ login.tsx             # ç™»å½•é¡µé¢
â”‚   â””â”€â”€ register.tsx          # æ³¨å†Œé¡µé¢
â”œâ”€â”€ user/                     # ç”¨æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ _layout.tsx           # ç”¨æˆ·æ¨¡å—å¸ƒå±€
â”‚   â”œâ”€â”€ account.tsx           # è´¦æˆ·ä¿¡æ¯
â”‚   â”œâ”€â”€ coupon.tsx            # ä¼˜æƒ åˆ¸ç®¡ç†
â”‚   â””â”€â”€ createOrder.tsx       # åˆ›å»ºè®¢å•
â”œâ”€â”€ qrScanner.tsx             # äºŒç»´ç æ‰«æ
â”œâ”€â”€ splash.tsx                # å¯åŠ¨é¡µ
â””â”€â”€ _layout.tsx               # æ ¹è·¯ç”±é…ç½®

components/                   # ç»„ä»¶ç›®å½•
â”œâ”€â”€ ui/                       # UI ç»„ä»¶
â”‚   â”œâ”€â”€ collapsible.tsx       # æŠ˜å ç»„ä»¶
â”‚   â”œâ”€â”€ icon-symbol.tsx       # å›¾æ ‡ç¬¦å·
â”‚   â”œâ”€â”€ icon-symbol.ios.tsx   # iOS å›¾æ ‡ç¬¦å·
â”‚   â”œâ”€â”€ MenuItem.tsx          # èœå•é¡¹ç»„ä»¶
â”‚   â”œâ”€â”€ MenuList.tsx          # èœå•åˆ—è¡¨ç»„ä»¶
â”‚   â””â”€â”€ TabSwitch.tsx         # æ ‡ç­¾åˆ‡æ¢ç»„ä»¶
â”œâ”€â”€ external-link.tsx         # å¤–éƒ¨é“¾æ¥ç»„ä»¶
â”œâ”€â”€ haptic-tab.tsx            # è§¦æ„Ÿæ ‡ç­¾ç»„ä»¶
â”œâ”€â”€ hello-wave.tsx            # æ¬¢è¿åŠ¨ç”»ç»„ä»¶
â”œâ”€â”€ parallax-scroll-view.tsx  # è§†å·®æ»šåŠ¨è§†å›¾
â”œâ”€â”€ themed-text.tsx           # ä¸»é¢˜æ–‡æœ¬ç»„ä»¶
â””â”€â”€ themed-view.tsx           # ä¸»é¢˜è§†å›¾ç»„ä»¶

config/                       # é…ç½®æ–‡ä»¶
â””â”€â”€ api.config.ts             # API é…ç½®

constants/                    # å¸¸é‡
â””â”€â”€ theme.ts                  # ä¸»é¢˜é…ç½®

hooks/                        # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ use-request/              # è¯·æ±‚ Hook
â”‚   â””â”€â”€ index.ts              # useRequest Hook
â”œâ”€â”€ use-color-scheme.ts       # é¢œè‰²æ–¹æ¡ˆ Hook
â”œâ”€â”€ use-color-scheme.web.ts   # Web é¢œè‰²æ–¹æ¡ˆ Hook
â””â”€â”€ use-theme-color.ts        # ä¸»é¢˜é¢œè‰² Hook

request/                      # ç½‘ç»œè¯·æ±‚
â””â”€â”€ index.ts                  # Request è¯·æ±‚å°è£…

services/                     # æœåŠ¡å±‚
â”œâ”€â”€ auth.service.ts           # è®¤è¯æœåŠ¡
â”œâ”€â”€ user.service.ts           # ç”¨æˆ·æœåŠ¡
â”œâ”€â”€ order.service.ts          # è®¢å•æœåŠ¡
â”œâ”€â”€ points.service.ts         # ç§¯åˆ†æœåŠ¡
â””â”€â”€ index.ts                  # æœåŠ¡å¯¼å‡º

stores/                       # çŠ¶æ€ç®¡ç†
â””â”€â”€ profile-store.ts          # Zustand å…¨å±€çŠ¶æ€ç®¡ç†

utils/                        # å·¥å…·å‡½æ•°
â”œâ”€â”€ storage.ts                # AsyncStorage å°è£…
â””â”€â”€ topUpStorage.ts           # å……å€¼è®°å½•å­˜å‚¨

assets/                       # é™æ€èµ„æº
â””â”€â”€ images/                   # å›¾ç‰‡èµ„æº
    â”œâ”€â”€ icon.png              # åº”ç”¨å›¾æ ‡
    â”œâ”€â”€ splash-icon.png       # å¯åŠ¨å›¾æ ‡
    â”œâ”€â”€ cooker.png            # å¨å¸ˆèƒŒæ™¯å›¾
    â”œâ”€â”€ rollBackground.png    # æŠ½å¥–èƒŒæ™¯å›¾
    â””â”€â”€ ...                   # å…¶ä»–å›¾ç‰‡

json/                         # JSON æ•°æ®
â””â”€â”€ MaterialCommunityIcons.json  # å›¾æ ‡åº“æ•°æ®

examples/                     # ç¤ºä¾‹ä»£ç 
â””â”€â”€ request-example.tsx       # è¯·æ±‚ä½¿ç”¨ç¤ºä¾‹
```

---

## ğŸ›  æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: React Native + Expo Router
- **UI ç»„ä»¶**: React Native Paper
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æœ¬åœ°å­˜å‚¨**: AsyncStorage
- **å¯¼èˆª**: Expo Router (file-based routing)
- **å›¾æ ‡**: MaterialCommunityIcons
- **å¼€å‘è¯­è¨€**: TypeScript
- **ç½‘ç»œè¯·æ±‚**: Axios å°è£…

---

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. å®šä½åŠŸèƒ½ä½¿ç”¨

#### å®šä½çŠ¶æ€æ ‡è¯†
åœ¨åŸå¸‚é€‰æ‹©é¡µé¢ï¼Œ"å½“å‰å®šä½åŸå¸‚"æ—ä¼šæ˜¾ç¤ºï¼š
- **[å·²ä¿å­˜]** (è“è‰²) - æ¥è‡ªä¸Šæ¬¡é€‰æ‹©çš„ç¼“å­˜
- **[å®šä½ä¸­...]** (æ©™è‰²) - æ­£åœ¨è¿›è¡Œ GPS å®šä½
- **âœ“ ç»¿è‰²å¯¹å‹¾** - åˆšå®Œæˆçš„çœŸå®å®šä½

#### æŸ¥çœ‹å®šä½æ—¥å¿—
æ‰“å¼€å¼€å‘è€…å·¥å…·æ§åˆ¶å°ï¼ŒæŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š
```
ğŸ’¾ [ç¼“å­˜] ä»æœ¬åœ°å­˜å‚¨åŠ è½½åŸå¸‚: åŒ—äº¬å¸‚  â† ç¼“å­˜æ•°æ®
ğŸ“ [å®šä½] æ— ç¼“å­˜ï¼Œå¼€å§‹çœŸå®å®šä½...      â† çœŸå®å®šä½
âœ… [æˆåŠŸ] çœŸå®å®šä½è·å–åˆ°åŸå¸‚: åŒ—äº¬å¸‚   â† å®šä½æˆåŠŸ
```

#### æ¸…é™¤ç¼“å­˜æµ‹è¯•
å½“æ˜¾ç¤º `[å·²ä¿å­˜]` æ—¶ï¼Œç‚¹å‡»ä¸‹æ–¹çš„ **"æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°å®šä½"** æŒ‰é’®å³å¯ç«‹å³é‡æ–°å®šä½ã€‚

### 2. åŸå¸‚æœç´¢åŠŸèƒ½

æ”¯æŒä¸‰ç§æœç´¢æ–¹å¼ï¼š
- **ä¸­æ–‡æœç´¢**: ç›´æ¥è¾“å…¥"åŒ—äº¬"
- **å…¨æ‹¼æœç´¢**: è¾“å…¥"beijing"
- **é¦–å­—æ¯æœç´¢**: è¾“å…¥"bj"

### 3. ä¼šå‘˜å……å€¼åŠŸèƒ½

#### å……å€¼æµç¨‹
1. è¿›å…¥"ä¸ªäººä¸­å¿ƒ" â†’ ç‚¹å‡»"åœ¨çº¿å……å€¼"
2. é»˜è®¤é€‰ä¸­ 500å…ƒ å……å€¼æ¡£ä½
3. å¯é€‰æ‹©å…¶ä»–å……å€¼é‡‘é¢ï¼ˆ500/1000/2000/3000å…ƒï¼‰
4. é˜…è¯»å……å€¼é¡»çŸ¥
5. å‹¾é€‰"æˆ‘å·²é˜…è¯»å¹¶åŒæ„å……å€¼åè®®"
6. ç‚¹å‡»"ç¡®è®¤å……å€¼"æŒ‰é’®
7. è·³è½¬åˆ°å……å€¼æˆåŠŸé¡µé¢

#### å……å€¼ç•Œé¢ç‰¹ç‚¹
- ğŸ¯ é»˜è®¤é€‰ä¸­500å…ƒæ¡£ä½
- ğŸ¨ é€‰ä¸­å¡ç‰‡é«˜äº®æ©™è‰²è¾¹æ¡†
- ğŸ“‹ å……å€¼é¡»çŸ¥æ˜æ˜¾å±•ç¤º
- âœ… åè®®å‹¾é€‰åæŒ‰é’®æ‰å¯ç”¨
- ğŸ“Œ åº•éƒ¨æŒ‰é’®å›ºå®šæ˜¾ç¤º

#### è´¦æˆ·ä½™é¢ç®¡ç†
- ğŸ’° **å®æ—¶æ˜¾ç¤ºè´¦æˆ·ä½™é¢** - ä»æœ¬åœ°ç¼“å­˜è¯»å–ä½™é¢
- â™»ï¸ **è‡ªåŠ¨æ›´æ–°ä½™é¢** - å……å€¼æˆåŠŸåè‡ªåŠ¨å¢åŠ è´¦æˆ·ä½™é¢
- ğŸ”„ **é¡µé¢åˆ·æ–°** - ä»æˆåŠŸé¡µè¿”å›æ—¶è‡ªåŠ¨åˆ·æ–°ä½™é¢æ˜¾ç¤º
- ğŸ’¾ **æŒä¹…åŒ–å­˜å‚¨** - ä½™é¢ä¿å­˜åœ¨æœ¬åœ°ï¼Œåº”ç”¨é‡å¯ä¸ä¸¢å¤±

#### å……å€¼è®°å½•
- ğŸ’¾ è‡ªåŠ¨ä¿å­˜å……å€¼è®°å½•åˆ°æœ¬åœ°å­˜å‚¨
- ğŸ“Š æ”¯æŒæŸ¥çœ‹å†å²å……å€¼è®°å½•
- ğŸ”„ åˆ‡æ¢åˆ°"å……å€¼è®°å½•"æ ‡ç­¾æŸ¥çœ‹
- ğŸ“ è®°å½•åŒ…å«ï¼šå……å€¼é‡‘é¢ã€èµ é€é‡‘é¢ã€å……å€¼æ—¶é—´ã€çŠ¶æ€
- ğŸ—‚ï¸ è®°å½•æŒ‰æ—¶é—´å€’åºæ’åˆ—ï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰

#### æ•°æ®æŒä¹…åŒ–
- ä½¿ç”¨ AsyncStorage å­˜å‚¨å……å€¼è®°å½•å’Œè´¦æˆ·ä½™é¢
- è®°å½•ç»“æ„ï¼š`{ id, amount, bonus, totalAmount, timestamp, status }`
- ä½™é¢æ•°æ®ï¼š`accountBalance` (number)
- æ”¯æŒè·¨ä¼šè¯ä¿å­˜ï¼Œåº”ç”¨é‡å¯åæ•°æ®ä¸ä¸¢å¤±
- å……å€¼æ—¶è‡ªåŠ¨æ›´æ–°ä½™é¢ï¼šä½™é¢ = åŸä½™é¢ + å……å€¼é‡‘é¢ + èµ é€é‡‘é¢

---

## ğŸ” è®¤è¯åŠŸèƒ½

### åŠŸèƒ½ç‰¹æ€§

#### 1. é¦–é¡µæœªç™»å½•çŠ¶æ€
- **ä½ç½®**: `app/(tabs)/index.tsx`
- **åŠŸèƒ½**: 
  - æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€ (`tokenManager.isLoggedIn()`)
  - æœªç™»å½•æ—¶æ˜¾ç¤º"æˆæƒç™»å½•"å¡ç‰‡
  - ç‚¹å‡»å¡ç‰‡è·³è½¬åˆ°ç™»å½•é¡µé¢
  - å·²ç™»å½•æ—¶æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯å¡ç‰‡

#### 2. ç™»å½•é¡µé¢
- **è·¯å¾„**: `/auth/login`
- **åŠŸèƒ½**:
  - æ‰‹æœºå· + å¯†ç ç™»å½•
  - è¡¨å•éªŒè¯(æ‰‹æœºå·æ ¼å¼ã€å¯†ç é•¿åº¦)
  - å¯†ç æ˜¾ç¤º/éšè—åˆ‡æ¢
  - æ³¨å†Œè·³è½¬
  - ç¬¬ä¸‰æ–¹ç™»å½•å…¥å£(å¾®ä¿¡ã€QQ)
  - ç™»å½•æˆåŠŸåè‡ªåŠ¨ä¿å­˜ token å¹¶è·³è½¬åˆ°é¦–é¡µ

#### 3. æ³¨å†Œé¡µé¢
- **è·¯å¾„**: `/auth/register`
- **åŠŸèƒ½**:
  - æ‰‹æœºå· + æ˜µç§° + å¯†ç æ³¨å†Œï¼ˆç®€åŒ–ç‰ˆï¼Œæ— éœ€éªŒè¯ç ï¼‰
  - æ˜µç§°éªŒè¯ï¼ˆ2-20ä¸ªå­—ç¬¦ï¼‰
  - å¯†ç ç¡®è®¤éªŒè¯
  - è¡¨å•éªŒè¯
  - æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨ç™»å½•å¹¶è·³è½¬é¦–é¡µ

#### 4. é‡ç½®å¯†ç é¡µé¢
- **è·¯å¾„**: `/auth/reset-password`
- **çŠ¶æ€**: âš ï¸ æš‚æ—¶ä¸å¯ç”¨ï¼ˆéœ€è¦çŸ­ä¿¡éªŒè¯ç ï¼‰

### ğŸ¨ UI è®¾è®¡

#### ä¸»é¢˜è‰²
- **ä¸»è‰²è°ƒ**: `#FF7214` (æ©™è‰²)
- **èƒŒæ™¯è‰²**: `#F6EAE3` (æµ…æ£•è‰²)
- **è¾…åŠ©è‰²**: 
  - æˆåŠŸ/ç§¯åˆ†: `#4ECDC4` (é’è‰²)
  - ä¼šå‘˜: `#9B59B6` (ç´«è‰²)

#### è®¾è®¡äº®ç‚¹
1. **èƒŒæ™¯å›¾ç‰‡**: ä½¿ç”¨ `cooker.png` ä½œä¸ºèƒŒæ™¯ï¼Œå¢å¼ºé¤å…æ°›å›´
2. **åŠé€æ˜å¡ç‰‡**: è¡¨å•ä½¿ç”¨ç™½è‰²åŠé€æ˜èƒŒæ™¯ `rgba(255, 255, 255, 0.95)`
3. **å›¾æ ‡ Logo**: ä½¿ç”¨é¤å…·å›¾æ ‡ (`silverware-fork-knife`) ä½œä¸ºå“ç‰Œæ ‡è¯†
4. **Material Design**: ä½¿ç”¨ React Native Paper ç»„ä»¶åº“
5. **åœ†è§’é˜´å½±**: æ‰€æœ‰å¡ç‰‡å’ŒæŒ‰é’®éƒ½æœ‰åœ†è§’å’Œé˜´å½±æ•ˆæœ

### è®¤è¯æµç¨‹

#### ç™»å½•æµç¨‹
```
1. ç”¨æˆ·è¾“å…¥æ‰‹æœºå·å’Œå¯†ç 
2. å‰ç«¯éªŒè¯æ ¼å¼
3. è°ƒç”¨ authService.login()
4. æˆåŠŸå tokenManager.saveLoginInfo() ä¿å­˜ token
5. è·³è½¬åˆ°é¦–é¡µ (tabs)
```

#### æ³¨å†Œæµç¨‹
```
1. ç”¨æˆ·è¾“å…¥æ‰‹æœºå·
2. è¾“å…¥æ˜µç§°ï¼ˆ2-20ä¸ªå­—ç¬¦ï¼‰
3. è¾“å…¥å¯†ç å’Œç¡®è®¤å¯†ç 
4. å‰ç«¯éªŒè¯æ ¼å¼å’Œå¯†ç ä¸€è‡´æ€§
5. è°ƒç”¨ authService.register({ phone, nickname, password })
6. æˆåŠŸåè‡ªåŠ¨ç™»å½•(ä¿å­˜ token)
7. è·³è½¬åˆ°é¦–é¡µ
```

### æŠ€æœ¯å®ç°

#### 1. çŠ¶æ€ç®¡ç†
```typescript
// ä½¿ç”¨ useRequest hook ç®¡ç†è¯·æ±‚çŠ¶æ€
const { loading, runAsync } = useRequest(authService.login, {
  manual: true,
});

// è°ƒç”¨æ—¶ä½¿ç”¨ runAsync è·å–ç»“æœ
const [error, data] = await runAsync({ phone, password });
```

#### 2. è¡¨å•éªŒè¯
```typescript
// æ‰‹æœºå·éªŒè¯
const phoneRegex = /^1[3-9]\d{9}$/;

// æ˜µç§°éªŒè¯
nickname.length >= 2 && nickname.length <= 20

// å¯†ç é•¿åº¦éªŒè¯
password.length >= 6

// ç¡®è®¤å¯†ç éªŒè¯
confirmPassword === password
```

#### 3. Token ç®¡ç†
```typescript
// ä¿å­˜ç™»å½•ä¿¡æ¯
await tokenManager.saveLoginInfo({
  token: 'xxx',
  refreshToken: 'xxx',
  user: { id, phone, nickname }
});

// æ£€æŸ¥ç™»å½•çŠ¶æ€
const isLoggedIn = await tokenManager.isLoggedIn();

// æ¸…é™¤ç™»å½•ä¿¡æ¯(ç™»å‡º)
await tokenManager.clearLoginInfo();
```

### API æ¥å£

æ‰€æœ‰æ¥å£å®šä¹‰åœ¨ `services/auth.service.ts`:

```typescript
// ç™»å½•ï¼ˆæ‰‹æœºå· + å¯†ç ï¼‰
authService.login({ phone, password })

// æ³¨å†Œï¼ˆæ‰‹æœºå· + æ˜µç§° + å¯†ç ï¼‰
authService.register({ phone, nickname, password })

// ç™»å‡º
authService.logout()

// åˆ·æ–° Token
authService.refreshToken(refreshToken)
```

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **çŸ­ä¿¡éªŒè¯ç **: å½“å‰ç‰ˆæœ¬**ä¸æ”¯æŒ**çŸ­ä¿¡éªŒè¯ç åŠŸèƒ½
   - æ³¨å†Œé¡µé¢å·²ç®€åŒ–ä¸ºï¼šæ‰‹æœºå· + æ˜µç§° + å¯†ç 
   - ç™»å½•é¡µé¢å·²ç§»é™¤"å¿˜è®°å¯†ç "é“¾æ¥
   - é‡ç½®å¯†ç åŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨
   - éœ€è¦æ¥å…¥çŸ­ä¿¡å¹³å°ï¼ˆé˜¿é‡Œäº‘SMS/è…¾è®¯äº‘SMSç­‰ï¼‰åå†å¯ç”¨ç›¸å…³åŠŸèƒ½

2. **è·¯ç”±ç±»å‹**: ç”±äº Expo Router çš„ç±»å‹é™åˆ¶ï¼Œæ–°å¢è·¯ç”±éœ€è¦ä½¿ç”¨ `as any` æ–­è¨€
   ```typescript
   router.push('/auth/login' as any)
   ```

3. **AsyncStorage**: æ‰€æœ‰ token æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œéœ€è¦ä½¿ç”¨ `await`

4. **é”™è¯¯å¤„ç†**: API è¿”å›çš„æ˜¯ `[error, data]` å…ƒç»„ï¼Œéœ€è¦è§£æ„å¤„ç†

5. **ç™»å½•ä¿æŒ**: Token ä¿å­˜åœ¨ AsyncStorageï¼Œapp é‡å¯åä»ç„¶æœ‰æ•ˆ

6. **è‡ªåŠ¨åˆ·æ–°**: Token è¿‡æœŸæ—¶(401)ä¼šè‡ªåŠ¨å°è¯•åˆ·æ–°ï¼Œå¤±è´¥åæ¸…é™¤ç™»å½•çŠ¶æ€

---

## ğŸ“¡ API è¯·æ±‚å°è£…

### é…ç½®æœåŠ¡ç«¯åœ°å€

åœ¨ `config/api.config.ts` ä¸­ä¿®æ”¹ï¼š

```typescript
export const ENV = {
  development: {
    baseURL: 'http://192.168.1.136:5000', // æ”¹æˆä½ çš„æœåŠ¡å™¨åœ°å€
    timeout: 10000,
  },
};

export const CURRENT_ENV = 'development'; // å½“å‰ç¯å¢ƒ
```

### ä½¿ç”¨æ–¹å¼

#### æ–¹å¼A: ç›´æ¥ä½¿ç”¨ request

```typescript
import request from '@/request';

// GET è¯·æ±‚
const [error, data] = await request.get<User[]>('/api/users', {
  page: 1,
  size: 10,
});

if (!error) {
  console.log('ç”¨æˆ·åˆ—è¡¨:', data);
}

// POST è¯·æ±‚
const [error, result] = await request.post('/api/login', {
  username: 'test',
  password: '123456',
});
```

#### æ–¹å¼B: ä½¿ç”¨ useRequest Hookï¼ˆæ¨èï¼‰

```typescript
import { useRequest } from '@/hooks/use-request';

function UserList() {
  // è‡ªåŠ¨è¯·æ±‚
  const { data, loading, error, refresh } = useRequest(
    () => request.get('/api/users', { page: 1 }),
    {
      manual: false, // ç»„ä»¶åŠ è½½æ—¶è‡ªåŠ¨è¯·æ±‚
    }
  );

  if (loading) return <ActivityIndicator />;
  if (error) return <Text>åŠ è½½å¤±è´¥</Text>;

  return (
    <View>
      {data?.map(user => <Text key={user.id}>{user.name}</Text>)}
      <Button title="åˆ·æ–°" onPress={refresh} />
    </View>
  );
}
```

#### æ–¹å¼C: å°è£…æˆæœåŠ¡ï¼ˆæœ€ä½³å®è·µï¼‰

```typescript
// services/user.ts
import request from '@/request';

export const userService = {
  login: (username: string, password: string) => {
    return request.post<{ token: string }>('/api/login', {
      username,
      password,
    });
  },
  
  getList: (page: number, size: number) => {
    return request.get<User[]>('/api/users', { page, size });
  },
};

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
const { data, loading } = useRequest(() => userService.getList(1, 10));
```

### request å¯¹è±¡ API

```typescript
// GET è¯·æ±‚
request.get<T>(url: string, params?: any, config?: AxiosRequestConfig): Response<T>

// POST è¯·æ±‚  
request.post<T>(url: string, data?: any, config?: AxiosRequestConfig): Response<T>

// PUT è¯·æ±‚
request.put<T>(url: string, data?: any, config?: AxiosRequestConfig): Response<T>

// DELETE è¯·æ±‚
request.delete<T>(url: string, params?: any, config?: AxiosRequestConfig): Response<T>

// PATCH è¯·æ±‚
request.patch<T>(url: string, data?: any, config?: AxiosRequestConfig): Response<T>

// ä¸Šä¼ æ–‡ä»¶
request.upload<T>(url: string, file: any, config?: AxiosRequestConfig): Response<T>
```

**è¿”å›å€¼ Response<T>:**
```typescript
type Response<T> = Promise<[boolean, T, AxiosResponse<T>]>
// [æ˜¯å¦é”™è¯¯, æ•°æ®, åŸå§‹å“åº”]
```

### useRequest Hook API

```typescript
useRequest<T>(
  serviceMethod: (...args: any) => Response<T>,
  options?: {
    manual?: boolean;        // æ˜¯å¦æ‰‹åŠ¨è§¦å‘ï¼Œé»˜è®¤false
    defaultParams?: any[];   // é»˜è®¤å‚æ•°
  }
)
```

**è¿”å›å€¼:**
```typescript
{
  data: T | undefined;           // å“åº”æ•°æ®
  loading: boolean;              // åŠ è½½çŠ¶æ€
  error: boolean | undefined;    // é”™è¯¯çŠ¶æ€
  run: (...params: any) => void; // æ‰‹åŠ¨è§¦å‘ï¼ˆä¸è¿”å›Promiseï¼‰
  runAsync: (...params: any) => Response<T>; // æ‰‹åŠ¨è§¦å‘ï¼ˆè¿”å›Promiseï¼‰
  refresh: () => void;           // ä½¿ç”¨ä¸Šæ¬¡å‚æ•°é‡æ–°è¯·æ±‚
}
```

### Token ç®¡ç†

#### è‡ªåŠ¨ Token å¤„ç†

è¯·æ±‚ä¼šè‡ªåŠ¨ä» `AsyncStorage` ä¸­è¯»å– token å¹¶æ·»åŠ åˆ°è¯·æ±‚å¤´ï¼š

```typescript
Authorization: Bearer <token>
```

#### ç™»å½•åä¿å­˜ Token

```typescript
import AsyncStorage from '@react-native-async-storage/async-storage';

const handleLogin = async () => {
  const [error, data] = await request.post('/api/login', { username, password });
  
  if (!error) {
    // ä¿å­˜ token
    await AsyncStorage.setItem('token', data.token);
    await AsyncStorage.setItem('refreshToken', data.refreshToken);
  }
};
```

#### è‡ªåŠ¨ Token åˆ·æ–°

å½“è¯·æ±‚è¿”å› `401` æœªæˆæƒæ—¶ï¼Œä¼šè‡ªåŠ¨ï¼š
1. æš‚åœæ‰€æœ‰æ–°è¯·æ±‚
2. è°ƒç”¨åˆ·æ–° token æ¥å£
3. ä¿å­˜æ–°çš„ token
4. é‡æ–°å‘èµ·å¤±è´¥çš„è¯·æ±‚

### é«˜çº§åŠŸèƒ½

#### 1. å¹¶å‘æ§åˆ¶

é»˜è®¤æœ€å¤§å¹¶å‘æ•°ä¸º 100ï¼Œå¯ä»¥è°ƒæ•´ï¼š

```typescript
import request from '@/request';

request.setLimit(50); // è®¾ç½®æœ€å¤§å¹¶å‘æ•°ä¸º50
```

#### 2. è¯·æ±‚é˜Ÿåˆ—

å½“å¹¶å‘è¾¾åˆ°ä¸Šé™æˆ–æ­£åœ¨åˆ·æ–° token æ—¶ï¼Œæ–°è¯·æ±‚ä¼šè‡ªåŠ¨åŠ å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…å¤„ç†ã€‚

#### 3. å¼€å‘ç¯å¢ƒæ—¥å¿—

å¼€å‘ç¯å¢ƒä¸‹ä¼šè‡ªåŠ¨æ‰“å°ï¼š
- ğŸ“¤ è¯·æ±‚æ—¥å¿—ï¼šurlã€methodã€paramsã€data
- ğŸ“¥ å“åº”æ—¥å¿—ï¼šurlã€statusã€data
- âŒ é”™è¯¯æ—¥å¿—ï¼šurlã€messageã€status

### æœ€ä½³å®è·µ

1. **ç»Ÿä¸€ç®¡ç† API è·¯å¾„**
   ```typescript
   // config/api.config.ts
   export const API_PATHS = {
     user: {
       login: '/api/user/login',
       profile: '/api/user/profile',
     },
   };
   ```

2. **å°è£…æœåŠ¡å±‚**
   ```typescript
   // services/user.ts
   export const userService = {
     login: (data) => request.post(API_PATHS.user.login, data),
     getProfile: () => request.get(API_PATHS.user.profile),
   };
   ```

3. **ä½¿ç”¨ TypeScript ç±»å‹**
   ```typescript
   interface User {
     id: string;
     name: string;
   }
   
   const [error, user] = await request.get<User>('/api/user');
   ```

4. **é”™è¯¯å¤„ç†**
   ```typescript
   const [error, data] = await request.get('/api/users');
   
   if (error) {
     Alert.alert('é”™è¯¯', 'åŠ è½½å¤±è´¥');
     return;
   }
   
   // ä½¿ç”¨ data
   ```

5. **ä½¿ç”¨ useRequest ç®€åŒ–çŠ¶æ€ç®¡ç†**
   ```typescript
   // æ¨èï¼šä½¿ç”¨ useRequest
   const { data, loading } = useRequest(() => request.get('/api/users'));
   ```

---

## ğŸ“± EAS æ„å»ºæŒ‡å—

### æ„å»ºå‘½ä»¤

#### 1. å¼€å‘ç‰ˆæœ¬ï¼ˆç”¨äºå†…éƒ¨æµ‹è¯•ï¼‰
```bash
eas build --profile development --platform android
```

#### 2. é¢„è§ˆç‰ˆæœ¬ï¼ˆç”¨äºæµ‹è¯•åˆ†å‘ï¼‰
```bash
eas build --profile preview --platform android
```

#### 3. ç”Ÿäº§ç‰ˆæœ¬ï¼ˆç”¨äºå‘å¸ƒåˆ°åº”ç”¨å•†åº—ï¼‰
```bash
eas build --profile production --platform android
```

#### 4. åŒæ—¶æ„å»º iOS å’Œ Android
```bash
eas build --profile production --platform all
```

### æ„å»ºé…ç½®è¯´æ˜

#### eas.json é…ç½®æ–‡ä»¶
```json
{
  "build": {
    "development": {
      "developmentClient": true,  // å¼€å‘å®¢æˆ·ç«¯
      "distribution": "internal"   // å†…éƒ¨åˆ†å‘
    },
    "preview": {
      "distribution": "internal"   // é¢„è§ˆç‰ˆï¼Œå†…éƒ¨åˆ†å‘
    },
    "production": {
      "autoIncrement": true        // è‡ªåŠ¨é€’å¢ç‰ˆæœ¬å·
    }
  }
}
```

### å·²é…ç½®çš„æƒé™

#### Android æƒé™
- âœ… ç›¸æœºæƒé™ï¼ˆæ‰«æäºŒç»´ç ï¼‰
- âœ… ä½ç½®æƒé™ï¼ˆæ˜¾ç¤ºé™„è¿‘é—¨åº—ï¼‰
- âœ… Package: `com.ar1se.restaurant`

#### iOS æƒé™
- âœ… ç›¸æœºæƒé™ï¼ˆæ‰«æäºŒç»´ç ï¼‰
- âœ… ä½ç½®æƒé™ï¼ˆæ˜¾ç¤ºé™„è¿‘é—¨åº—ï¼‰
- âœ… Bundle Identifier: `com.ar1se.restaurant`

### æ„å»ºæµç¨‹

#### ç¬¬ä¸€æ¬¡æ„å»ºï¼ˆæ¨èé¢„è§ˆç‰ˆï¼‰
```bash
# 1. ç¡®ä¿ä»£ç å·²æäº¤
git add .
git commit -m "å‡†å¤‡æ„å»º"

# 2. å¼€å§‹æ„å»º
eas build --profile preview --platform android

# 3. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆé€šå¸¸éœ€è¦ 5-15 åˆ†é’Ÿï¼‰
# æ„å»ºå®Œæˆåä¼šæ˜¾ç¤ºä¸‹è½½é“¾æ¥
```

#### æ„å»ºé€‰é¡¹è¯´æ˜
åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šè¯¢é—®ï¼š
1. **æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆå‡­è¯ï¼Ÿ** â†’ é€‰æ‹© `Yes`ï¼ˆé¦–æ¬¡æ„å»ºï¼‰
2. **æ˜¯å¦è¦ç”Ÿæˆæ–°çš„ Keystoreï¼Ÿ** â†’ é€‰æ‹© `Yes`ï¼ˆAndroidï¼‰
3. **åº”ç”¨å•†åº—å‡­è¯** â†’ å¦‚æœåªæ˜¯æµ‹è¯•ï¼Œå¯ä»¥è·³è¿‡

### ä¸‹è½½å’Œå®‰è£…

#### æ–¹æ³• 1ï¼šé€šè¿‡ EAS ç½‘ç«™
1. è®¿é—®ï¼šhttps://expo.dev/accounts/ar1se/projects/rn-components
2. æ‰¾åˆ°æœ€æ–°çš„æ„å»º
3. ä¸‹è½½ APK æ–‡ä»¶
4. åœ¨ Android è®¾å¤‡ä¸Šå®‰è£…

#### æ–¹æ³• 2ï¼šé€šè¿‡å‘½ä»¤è¡Œ
```bash
# æŸ¥çœ‹æ„å»ºåˆ—è¡¨
eas build:list

# ä¸‹è½½æœ€æ–°æ„å»º
eas build:download --latest
```

#### æ–¹æ³• 3ï¼šæ‰«ç å®‰è£…
æ„å»ºå®Œæˆåï¼Œä¼šç”Ÿæˆä¸€ä¸ªäºŒç»´ç ï¼Œç”¨æ‰‹æœºæ‰«æå³å¯å®‰è£…

### æ›´æ–°ç‰ˆæœ¬

ç¼–è¾‘ `app.json`:
```json
{
  "expo": {
    "version": "1.0.1",  // æ›´æ–°è¿™é‡Œ
    "android": {
      "versionCode": 2   // å¯é€‰ï¼šæ‰‹åŠ¨è®¾ç½® Android ç‰ˆæœ¬ç 
    },
    "ios": {
      "buildNumber": "2" // å¯é€‰ï¼šæ‰‹åŠ¨è®¾ç½® iOS æ„å»ºå·
    }
  }
}
```

æˆ–è€…ä½¿ç”¨ `production` é…ç½®æ–‡ä»¶ï¼Œå®ƒä¼šè‡ªåŠ¨é€’å¢ç‰ˆæœ¬å·ã€‚

### å¸¸è§é—®é¢˜

#### 1. æ„å»ºå¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
eas build:list
# ç‚¹å‡»å¤±è´¥çš„æ„å»ºæŸ¥çœ‹æ—¥å¿—
```

#### 2. æ¸…ç†ç¼“å­˜é‡æ–°æ„å»º
```bash
eas build --profile preview --platform android --clear-cache
```

#### 3. æœ¬åœ°æ„å»ºï¼ˆéœ€è¦ Android Studio/Xcodeï¼‰
```bash
eas build --profile preview --platform android --local
```

### æ¨èå·¥ä½œæµç¨‹

#### å¼€å‘é˜¶æ®µ
```bash
npm start  # æœ¬åœ°å¼€å‘ï¼Œä½¿ç”¨ Expo Go
```

#### æµ‹è¯•é˜¶æ®µ
```bash
eas build --profile preview --platform android
```

#### å‘å¸ƒé˜¶æ®µ
```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
# 2. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
eas build --profile production --platform all

# 3. æäº¤åˆ°åº”ç”¨å•†åº—
eas submit --platform android
eas submit --platform ios
```

### æ„å»ºçŠ¶æ€æŸ¥çœ‹

```bash
# æŸ¥çœ‹æ‰€æœ‰æ„å»º
eas build:list

# æŸ¥çœ‹ç‰¹å®šæ„å»º
eas build:view <build-id>

# å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„æ„å»º
eas build:cancel
```

---

## ğŸ“ å¼€å‘è¯´æ˜

### æµ‹è¯•å……å€¼åŠŸèƒ½
1. é¦–æ¬¡ä½¿ç”¨æ—¶è´¦æˆ·ä½™é¢ä¸º 0
2. é€‰æ‹©å……å€¼æ¡£ä½ï¼ˆé»˜è®¤500å…ƒï¼‰
3. å‹¾é€‰åè®®åç‚¹å‡»"ç¡®è®¤å……å€¼"
4. æŸ¥çœ‹å……å€¼æˆåŠŸé¡µé¢
5. è¿”å›åä½™é¢è‡ªåŠ¨æ›´æ–°ï¼ˆåŸä½™é¢ + å……å€¼é‡‘é¢ + èµ é€é‡‘é¢ï¼‰
6. åˆ‡æ¢åˆ°"å……å€¼è®°å½•"æ ‡ç­¾æŸ¥çœ‹å†å²

**æ¸…é™¤æµ‹è¯•æ•°æ®**ï¼š
åœ¨ Expo Go ä¸­å¯ä»¥æ¸…é™¤åº”ç”¨æ•°æ®é‡æ–°å¼€å§‹æµ‹è¯•ã€‚

### æµ‹è¯•å®šä½åŠŸèƒ½
1. ä½¿ç”¨çœŸæœºæµ‹è¯•ï¼ˆæ¨èï¼‰- å®šä½æ•ˆæœæœ€å¥½
2. æ¨¡æ‹Ÿå™¨éœ€è¦æ‰‹åŠ¨è®¾ç½®ä½ç½®
3. é¦–æ¬¡ä½¿ç”¨ä¼šè¯·æ±‚å®šä½æƒé™
4. å¦‚éœ€é‡æ–°å®šä½ï¼Œç‚¹å‡»"æ¸…é™¤ç¼“å­˜"æŒ‰é’®

### æ§åˆ¶å°æ—¥å¿—è¯´æ˜
- ğŸš€ å®šä½æµç¨‹å¼€å§‹
- ğŸ’¾ ä»ç¼“å­˜åŠ è½½
- ğŸ“ çœŸå®å®šä½
- ğŸ” æƒé™å¤„ç†
- ğŸ“¡ GPS è·å–åæ ‡
- ğŸ—ºï¸ åœ°ç†ç¼–ç 
- âœ… æˆåŠŸ
- âŒ å¤±è´¥

### æƒé™é…ç½®

å®šä½æƒé™å·²åœ¨ `app.json` ä¸­é…ç½®ï¼š
- âœ… iOS: NSLocationWhenInUseUsageDescription
- âœ… Android: ACCESS_COARSE_LOCATION, ACCESS_FINE_LOCATION

---

## ğŸ“… æ›´æ–°æ—¥å¿—

### 2025-10-20 - è®¤è¯åŠŸèƒ½å®ç°

#### âœ¨ æ–°å¢åŠŸèƒ½

**1. ç™»å½•åŠŸèƒ½**
- **ç™»å½•é¡µé¢**: `/auth/login`
- **è¾“å…¥å­—æ®µ**: æ‰‹æœºå· + å¯†ç 
- **åŠŸèƒ½**:
  - æ‰‹æœºå·æ ¼å¼éªŒè¯ï¼ˆ11ä½ï¼Œ1å¼€å¤´ï¼‰
  - å¯†ç é•¿åº¦éªŒè¯ï¼ˆæœ€å°‘6ä½ï¼‰
  - å¯†ç æ˜¾ç¤º/éšè—åˆ‡æ¢
  - ç¬¬ä¸‰æ–¹ç™»å½•å…¥å£ï¼ˆå¾®ä¿¡ã€QQï¼‰
  - ç™»å½•æˆåŠŸè‡ªåŠ¨ä¿å­˜ Token
  - è‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µ

**2. æ³¨å†ŒåŠŸèƒ½**
- **æ³¨å†Œé¡µé¢**: `/auth/register`
- **è¾“å…¥å­—æ®µ**: æ‰‹æœºå· + æ˜µç§° + å¯†ç  + ç¡®è®¤å¯†ç 
- **åŠŸèƒ½**:
  - æ‰‹æœºå·æ ¼å¼éªŒè¯
  - **æ˜µç§°éªŒè¯**ï¼ˆ2-20ä¸ªå­—ç¬¦ï¼‰
  - å¯†ç é•¿åº¦éªŒè¯ï¼ˆæœ€å°‘6ä½ï¼‰
  - å¯†ç ä¸€è‡´æ€§éªŒè¯
  - æ³¨å†ŒæˆåŠŸè‡ªåŠ¨ç™»å½•
  - è‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µ

**3. é¦–é¡µæœªç™»å½•çŠ¶æ€**
- **ä¿®æ”¹æ–‡ä»¶**: `app/(tabs)/index.tsx`
- **åŠŸèƒ½**:
  - æ£€æµ‹ç”¨æˆ·ç™»å½•çŠ¶æ€
  - æœªç™»å½•æ—¶æ˜¾ç¤º"æˆæƒç™»å½•"å¡ç‰‡
  - ç‚¹å‡»å¡ç‰‡è·³è½¬åˆ°ç™»å½•é¡µ
  - å·²ç™»å½•æ—¶æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯å¡ç‰‡

#### ğŸ”§ æŠ€æœ¯å®ç°

**è¯·æ±‚å°è£…**
- **ä½ç½®**: `request/index.ts`
- **åŠŸèƒ½**:
  - Axios å°è£…
  - è‡ªåŠ¨ Token æ³¨å…¥
  - 401 è‡ªåŠ¨åˆ·æ–° Token
  - è¯·æ±‚é˜Ÿåˆ—ç®¡ç†ï¼ˆå¹¶å‘é™åˆ¶100ï¼‰
  - è¿”å› `[error, data, response]` å…ƒç»„

**useRequest Hook**
- **ä½ç½®**: `hooks/use-request/index.ts`
- **åŠŸèƒ½**:
  - ç®¡ç† loadingã€errorã€data çŠ¶æ€
  - `run` / `runAsync` æ–¹æ³•
  - `refresh` åˆ·æ–°åŠŸèƒ½
  - æ”¯æŒæ‰‹åŠ¨/è‡ªåŠ¨æ¨¡å¼

**è®¤è¯æœåŠ¡**
- **ä½ç½®**: `services/auth.service.ts`
- **æ¥å£**:
  ```typescript
  // ç™»å½•
  authService.login({ phone, password })
  
  // æ³¨å†Œ
  authService.register({ phone, nickname, password })
  
  // ç™»å‡º
  authService.logout()
  
  // åˆ·æ–° Token
  authService.refreshToken(refreshToken)
  ```

**Token ç®¡ç†**
- **ä½ç½®**: `services/auth.service.ts` - tokenManager
- **åŠŸèƒ½**:
  ```typescript
  // ä¿å­˜ç™»å½•ä¿¡æ¯
  await tokenManager.saveLoginInfo(data)
  
  // æ£€æŸ¥æ˜¯å¦ç™»å½•
  await tokenManager.isLoggedIn()
  
  // è·å– Token
  await tokenManager.getToken()
  
  // æ¸…é™¤ç™»å½•ä¿¡æ¯
  await tokenManager.clearLoginInfo()
  ```

#### ğŸ“ API é…ç½®
- **ä½ç½®**: `config/api.config.ts`
- **åç«¯åœ°å€**: `http://192.168.1.136:5000`
- **ç¯å¢ƒ**: development (dev)

#### âš ï¸ é‡è¦è¯´æ˜

**å·²ç§»é™¤çš„åŠŸèƒ½**
1. **çŸ­ä¿¡éªŒè¯ç **
   - åŸå› ï¼šæœªæ¥å…¥çŸ­ä¿¡å¹³å°
   - å½±å“ï¼šæ³¨å†Œä¸éœ€è¦éªŒè¯ç ï¼Œç›´æ¥ä½¿ç”¨æ‰‹æœºå·+æ˜µç§°+å¯†ç 
   - åç»­ï¼šæ¥å…¥é˜¿é‡Œäº‘SMSæˆ–è…¾è®¯äº‘SMSåå¯å¯ç”¨

2. **å¿˜è®°å¯†ç **
   - åŸå› ï¼šä¾èµ–çŸ­ä¿¡éªŒè¯ç 
   - çŠ¶æ€ï¼šç™»å½•é¡µå·²éšè—"å¿˜è®°å¯†ç "é“¾æ¥
   - æ–‡ä»¶ï¼š`app/auth/reset-password.tsx` å·²åˆ›å»ºä½†æš‚ä¸å¯ç”¨

**æ¥å£å˜æ›´**
```typescript
// æ—§ç‰ˆæœ¬ï¼ˆå·²åºŸå¼ƒï¼‰
RegisterRequest {
  phone: string;
  password: string;
}

// æ–°ç‰ˆæœ¬ï¼ˆå½“å‰ä½¿ç”¨ï¼‰
RegisterRequest {
  phone: string;
  nickname: string;  // âœ¨ æ–°å¢æ˜µç§°å­—æ®µ
  password: string;
}
```



## ğŸ¯ å¾…åŠäº‹é¡¹

### è®¤è¯åŠŸèƒ½ä¼˜åŒ–
- [ ] æ¥å…¥çŸ­ä¿¡éªŒè¯ç å¹³å°ï¼ˆé˜¿é‡Œäº‘SMS/è…¾è®¯äº‘SMSï¼‰
- [ ] å¯ç”¨å¿˜è®°å¯†ç åŠŸèƒ½
- [ ] æ·»åŠ ç”Ÿç‰©è¯†åˆ«ç™»å½•ï¼ˆæŒ‡çº¹/Face IDï¼‰
- [ ] å®ç°å¾®ä¿¡ã€QQ ç¬¬ä¸‰æ–¹ç™»å½•
- [ ] æ·»åŠ è®°ä½å¯†ç åŠŸèƒ½

### æ”¯ä»˜åŠŸèƒ½
- [ ] æ”¯ä»˜æ¥å£é›†æˆï¼ˆå¾®ä¿¡æ”¯ä»˜/æ”¯ä»˜å®ï¼‰
- [ ] åœ¨çº¿æ”¯ä»˜æµç¨‹
- [ ] æ”¯ä»˜ç»“æœå›è°ƒå¤„ç†
- [ ] é€€æ¬¾åŠŸèƒ½

### è®¢å•åŠŸèƒ½
- [ ] è®¢å•è¯¦æƒ…é¡µé¢å®Œå–„
- [ ] èœå“è¯¦æƒ…é¡µé¢
- [ ] è´­ç‰©è½¦åŠŸèƒ½
- [ ] è®¢å•çŠ¶æ€è¿½è¸ª

### ç¤¾äº¤åŠŸèƒ½
- [ ] è¯„ä»·ç³»ç»Ÿ
- [ ] è¯„è®ºæ™’å›¾
- [ ] åˆ†äº«åŠŸèƒ½

### ç³»ç»ŸåŠŸèƒ½
- [ ] æ¨é€é€šçŸ¥
- [ ] æ¶ˆæ¯ä¸­å¿ƒ
- [ ] å®¢æœç³»ç»Ÿ
- [ ] æ•°æ®ç»Ÿè®¡åˆ†æ

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿— - å¼€å‘ç¯å¢ƒä¼šè¾“å‡ºè¯¦ç»†æ—¥å¿—ã€‚

## ğŸ“ License

MIT

---

**å¼€å‘è€…**: WEB-Nest  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ31æ—¥
